---
author: pkrebs
ms.author: pkrebs
title: Модели интеграции с партнерами
ms.date: 3/9/2019
description: Модели интеграции с партнерами
ms.service: sharepoint-online
manager: bpardi
ms.topic: article
audience: admin
ms.openlocfilehash: 826b8a463fde50188abbc80e295924b120104cf6
ms.sourcegitcommit: 97e175e5ff5b6a9e0274d5ec9b39fdf7e18eb387
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/25/2021
ms.locfileid: "51999525"
---
# <a name="partner-integration-models"></a>Модели интеграции с партнерами
Хотя невозможно дополнить содержимое путей обучения Microsoft 365 напрямую "из коробки" из службы предварительного обеспечения SharePoint Online, существует несколько моделей интеграции, которые партнеры могут использовать для создания предложений по добавленной стоимости. Модели интеграции партнеров, представленные выше, представлены в порядке возрастания сложности и уровней инвестиций. Поэтому наше руководство — это создание экспертных знаний и выпуск до более сложных уровней на основе бизнес-моделей.

![На диаграмме потока показана роль включить, интеграторы и redistibutors.](media/cg-part-intmodel.png)

## <a name="how-should-i-get-started"></a>Как начать работу? 
Чтобы начать работу, выполните несколько практических методов.     

### <a name="1-begin-with-building-expertise-as-an-enabler"></a>1. Начните со строительной экспертизы в качестве enabler. 
Вы можете сразу же помочь проценту своей клиентской базы, включив портал подготовки путей обучения и выполняя целевые курсы контента Майкрософт. Инструкции по обеспечению путей обучения https://docs.microsoft.com/office365/customlearning/custom_provision см. в .  

### <a name="2-then-extend-your-services-as-an-integrator"></a>2. Затем расширяйте свои службы в качестве интегратора
Выполните возврат автоматизации при анализе инвестиций в зависимости от количества потребностей в интеграции контента и/или служб. Например, не имеет смысла брать на себя затраты на разработку и эксплуатацию в отношении наших рекомендаций по интеграции контента, если вы можете быстро вручную создать целевой пользовательский плейлист(ы), указывающий на платное содержимое или ссылки на ваши службы.

### <a name="3-when-the-return-on-investment-makes-sense--consider-redistribution"></a>3. Когда имеет смысл возвращать инвестиции — рассмотрим перераспределение 
Когда имеет смысл возвращать инвестиции — рассмотрим перераспределение (или работу с связанными партнерами по пути обучения) для создания переупаковываемых решений. Они основаны на структуре Шаблоны и практика SharePoint, которая предоставляет решения по извлечению настраиваемых сайтов и их развертыванию в клиентской среде. 

## <a name="partner-provided-content-integration-guidelines"></a>Рекомендации по интеграции контента, предоставляемые партнером
Содержимое для путей обучения Microsoft 365 определяется набором файлов JSON, которые выступают в качестве манифестов контента для вашего пакета обучения. Существует три файла: metadata.js, playlists.jsи assets.js. Эти файлы должны быть структурированы в соответствие с моделями, распознаваемой веб-частью, а затем организованы из сети доставки контента (CDN), чтобы позволить веб-части загружать их. Корпорация Майкрософт предоставит шаблоны для запуска этих файлов.  

**Отказ от ответственности:** структура файла JSON может изменяться в зависимости от предстоящей работы решения. Партнер microsoft 365 по программам раннего усыновления (EAP) будет проинформирован о любых надвигающихся изменениях такого рода. Наряду с любым клиентом обратной совместимости и / или руководства по переходу. 

### <a name="download-the-microsoft-365-learning-pathways-solution"></a>Скачайте решение для путей обучения Microsoft 365
Вы можете скачать решение путей обучения Microsoft 365 вместе с файлами JSON в репозитории GitHub: https://github.com/pnp/custom-learning-office-365 . Обратите внимание, что в настоящее время Корпорация Майкрософт не принимает запрос на вытягивать GitHub для решения. Но вы можете использовать файлы GitHub в качестве отправной точки для создания собственного пользовательского пакета контента. 

### <a name="metadatajson-structure"></a>Metadata.jsв Структуре
Вы можете думать об этом файле как о мозге меню и структуры. Он содержит всю структуру навигации, а также списки выборов для данных в двух других файлах. 


|              Имя        |                     Описание                                                               | 
|:-----------------------------|-------------------------------------------------------------------------------------------|
|**Технологии**              |Содержимое помечено и может быть скрыто на основе назначенной технологии.                 |  
|&nbsp;&nbsp;Id                |GUID, представляющий технологию                                                           |  
|&nbsp;&nbsp;Имя              |Отображение имени технологии                                                             |
|&nbsp;&nbsp;*Субъекты[]*     |Массив субъектов, которые являются подмножество технологии                                   | 
|&nbsp;&nbsp;&nbsp;&nbsp;Id    |GUID, представляющий субъект                                                              |
|&nbsp;&nbsp;&nbsp;&nbsp;Имя  |Отображение имени субъекта                                                                |
|**Категории [ ]**             |Категории сообщают навигацию веб-части. Каждая категория представляет верхний уровень навигации                                                                                                                 |
|&nbsp;&nbsp;Id                |GUID, представляющий категорию/подкатегорию                                                 |
|&nbsp;&nbsp;Имя              |Отображение имени категории/подкатегории                                                  |
|&nbsp;&nbsp;Изображение             |URL-адрес для изображения, которое должно отображаться в UX (относительно базы CDN)            |
|&nbsp;&nbsp;TechnologyId      |GUID технологии, с чем связан этот контент (необязательный — пустая строка)            |
|&nbsp;&nbsp;SubjectId         |GUID субъекта, с этим контентом связан (необязательный — пустая строка)               |
|&nbsp;&nbsp;Источник            |Массив Source, не используемый специально в UX, кроме пользовательских данных, добавленных пользователем, помечен как "Tenant", а область администрирования UX не разрешает редактирование ничего не отмеченного "Tenant".                           |
|&nbsp;&nbsp;*Subcategories[]*|Sub-Categories в основном уровень nav от уровня 2 вниз. Структура такая же, как только что вложенная категория.          |
|**Аудитории []**             |Если списки воспроизведения, связанные с категорией или подкатегорией, являются различными помеченными аудиториями, селектор будет доступен для показа доступных аудиторий. |         
|&nbsp;&nbsp;Id                |GUID аудитории                                                                       |  
|&nbsp;&nbsp;Имя              |Отображение имени аудитории                                                               |       
|**Источники [ ]**               |Массив строк, которые теги содержимого с его источником, не специально используется в UX, кроме пользовательских данных, добавленных пользователем, помечены как "Tenant", и область администрирования UX не разрешает редактирование ничего не отмечено "Tenant".                                                   |  
|**Уровни [ ]**               |Если списки воспроизведения, связанные с категорией или подкатегорией, помечены различными уровнями, будет доступен селектор для показа доступных уровней.             |  
|&nbsp;&nbsp;Id                |GUID уровня                                                                          |  
|&nbsp;&nbsp;Имя              |Отображение имени уровня                                                                  | 
|**StatusTag [ ]**           |Тег status — это определение содержимого с различным состоянием, которое будет выставлено в UX. Некоторые из этих флагов будут показываться потребителю, а некоторые только администратору.                                                   |  
|&nbsp;&nbsp;Id                |GUID of the StatugTag                                                                      |  
|&nbsp;&nbsp;Имя              |Отображение имени StatusTag                                                              | 
|**Телеметрия [ ]**            |                                                                                           |  
|&nbsp;&nbsp;AppInsightsKey    |GUID ключа проницательности приложения, настроенного для отслеживания загрузки веб-части просмотра. Отслеживание может быть отключено администратором для всего клиента, но отправленная информация является анонимным пользователем с ид клиента. Дополнительные сведения см. в этом разделе https://github.com/pnp/custom-learning-office-365#disabling-telemetry-collection               |  
|**Версия**                   |Сведения о версии используются решением, чтобы указать администраторам, что веб-часть обновлена, а также разрешить веб-части самостоятельно обновлять настраиваемый контент до последней версии манифеста, если были внесены значительные изменения.         | 
|&nbsp;&nbsp;Манифест          |Версия манифеста                                               |
|&nbsp;&nbsp;ManifestMinWebPart|Минимальная версия веб-части, которая работает с версией манифеста             |
|&nbsp;&nbsp;CurrentWebPart    |URL-адрес для изображения, которое должно отображаться в UX (относительно базы CDN)            |
|&nbsp;&nbsp;RepoURL           |URL-адрес репозитория, в котором находятся инструкции по обновлению веб-части.                    |
|**Пакеты контента**             |В настоящее время пакеты контента для дополнительных CDN не поддерживаются. Пакеты контента позволяют Корпорации Майкрософт предложить другие созданные Microsoft решения, которые можно создать с помощью службы подготовка, которая использует M365LP для доставки контента и сами по себе являются пользовательскими cdNs.       | 
|&nbsp;&nbsp;Id                |GUID пакета контента/CDN                                                              |
|&nbsp;&nbsp;Имя              |Отображение имени CDN                                                                   |
|&nbsp;&nbsp;Описание       |Описание, отображаемое в пользовательском интерфейсе для добавления пакета контента                               |
|&nbsp;&nbsp;Изображение             |Изображение, которое будет отображаться в пользовательском интерфейсе для добавления пакета контента                                     |
|&nbsp;&nbsp;ProvisionURL      |URL-адрес пакета службы обеспечения для создания коллекции веб-сайтов пакета контента  |
|&nbsp;&nbsp;CDNbase           |Базовый URL-адрес манифестов для пакета контента                                       |
|AssetOrigins                  |Массив url-адресов, использованных в assets.jsв описанной позже папке. Если URL-адрес источника поддерживается, сообщение будет отправлено в help_getClientHeight. Ответ в свойстве данных: "help_getClientHeight={высота контента}" (например, "help_getClientHeight=5769") позволит повторно использовать iFrame до соответствующей высоты обрамленного контента.         |

### <a name="playlistsjson-structure"></a>Playlists.jsв Структуре
playlists.js— манифест плейлистов — это массив объектов, описываний метаданных о списке воспроизведения и активах, включенных в список воспроизведения.

|              Имя        |                     Описание                                                               | 
|:-----------------------------|-------------------------------------------------------------------------------------------|
|Id                            |GUID, представляющий список воспроизведения                                                             |  
|Название                         |Отображение имени списка воспроизведения                                                               |
|Image                         |Относительный URL-адрес (от CDN) к изображению для визуализации списка воспроизведения                              |                      
|LevelId                       |Связанный уровень                                                                           |
|AudienceId                   |Связанная аудитория                                                                        |
|TechnologyId                 |Связанные технологии                                                                      |
|SubjectId                    |Отображение имени категории/подкатегории                                                  |
|Источник                        |Из массива исходных данных, не используемых специально в UX, кроме пользовательских данных, добавленных пользователем, отмечено как "Tenant", а область администрирования UX не разрешает редактирование ничего не отмеченного "Tenant".                                              |
|CatId                         |ID category или SubCategory, который представляет контейнер, в котором должен быть показан список воспроизведения. В настоящее время манифест не поддерживает выбор категории или подкатегории в качестве контейнера, если у него также есть дети SubCategory.        |
|Описание                   |Описание, показанное для каждого списка воспроизведения в UX                                           |
|StatusTagId                   |Тег связанного состояния                                                                      |
|StatusNote                    |Заметки о контенте, отображаемом администраторам                                            |
|*Assets[]*                        |Массив GUID для активов, которые являются частью этого списка воспроизведения, в порядке отображения.        |         

### <a name="assetjson-structure"></a>Asset.jsв Структуре
playlists.js— манифест плейлистов — это массив объектов, описываний метаданных о списке воспроизведения и активах, включенных в список воспроизведения.

|              Имя        |                     Описание                                                               | 
|:-----------------------------|-------------------------------------------------------------------------------------------|
|Id                            |GUID, представляющий список воспроизведения                                                             |  
|Название                         |Отображение имени списка воспроизведения                                                               |
|Описание                   |---                                                                                           |                      
|URL                           |Url-адрес источника для актива, который будет применен к iFrame                                  |
|TechnologyId                  |Связанные технологии                                                                      |
|SubjectId                     |Связанный субъект                                                                         |
|Источник                        |Отображение имени категории/подкатегории                                                  |
|StatusTagId                   |Тег связанного состояния                                                                      |
|StatusNote                    |Заметки о контенте, отображаемом администраторам.                                           |

### <a name="caching"></a>Кэширование
Текущая версия веб-части просмотра использует кэшную версию файлов манифеста в течение 24 часов. Через 24 часа первый пользователь, нажав веб-часть, получает хит производительности, чтобы обновить кэш, скачав манифесты из источника CDN и объединив эту информацию со скрытыми технологиями и плейлистами, а также объединившись в настраиваемые подделы, плейлисты и активы. Поочередно веб-часть администратора всегда скачивает содержимое из манифестов и объединяет их и обновляет кэш.  Таким образом, другими словами, администратор может принудительно обновить кэш в любое время, загрузив веб-часть администратора, а также перенаправление на страницу Администрирование.

## <a name="content-pack-guidelines"></a>Рекомендации по пакету контента
Функция Пакета контента открывает следующие сценарии:
- Возможность для партнеров перераспределить настраиваемый пользовательский контент обучения, адаптированный к среде клиентов
- Возможность для организаций с сильной командой подготовки и ИТ-поддержкой создавать настраиваемый обучающий контент, направленный на собственные внутренние системы и управление
- Возможность для Корпорации Майкрософт предоставлять дополнительные пути обучения в будущем, в которые клиенты могут выбрать

Текущий набор документации намеренно ориентирован на партнеров из-за сложности функции. Группа служб активно работает над улучшением поддержки и #2 сценариев в будущем. 

### <a name="how-content-packs-work"></a>Работа пакетов контента
Корпорация Майкрософт использует страницы GitHub в качестве источника сети доставки контента (CDN) для своих файлов и изображений манифеста. У нас есть папка документов в корне нашего репозитория GitHub, которая включает в себя папки sub для каждой версии файлов манифеста. Внутри каждой папки находятся три файла манифеста, а также папка изображений для хранения всех изображений категории, подкатегории и списков воспроизведения. 

Важно поддерживать ту же структуру версий, что и Корпорация Майкрософт, если вы решите расширить решение путей обучения с помощью собственного пакета контента. Конечная точка CDN не должна включать папку версии, так как версия манифеста, поддерживаемая веб-частью, запекается в нее и автоматически примыкает к URL-адресу CDN. Очевидно, что мы дадим вам время для создания новых экземпляров файлов манифеста при их пересмотре.

![Снимок экрана показывает пример структуры.](media/cg-part-json-folder.png) 

Дополнительные сведения об использовании страниц GitHub в качестве источника CDN см. в следующей справке: [https://help.github.com/en/articles/configuring-a-publishing-source-for-github-pages](https://help.github.com/en/articles/configuring-a-publishing-source-for-github-pages) .

Решение Корпорации Майкрософт делает сведения об активах общедоступными, так как нет безопасности, вокруг которых есть доступ к этим файлам. Мы считаем, что для потребителя должен быть свободный уровень контента, который сказал, что если для некоторых или всех контентов требуется использовать платную стену, необходимо будет реализовать это по-другому в рамках технических ограничений решения, и использование страниц GitHub ни в коем случае не является необходимым требованием. Любой поставщик CDN, который вы хотите использовать, в порядке, если вы поддерживаете структуру нуминга версий, очерченную вами. Как уже говорилось ранее, версия структуры манифеста, поддерживаемая веб-частью, запекается в коде и автоматически примыкает к URL-адресу CDN. 

### <a name="content-pack-integration-guidance"></a>Руководство по интеграции пакетов контента 
Веб-части администратора и просмотра были расширены, чтобы позволить потребителю настраивать дополнительные конечные точки CDN в клиенте, что позволит веб-части просмотра выбрать, какой cdN они должны источником данных, которые они отображаются. 

Основные разработки, которые необходимо иметь в виду для этой функции: 
- Это основное применимо для сценариев перераспределения партнеров, где конфигурация ручного списка воспроизведения слишком громоздка. 
- Пользовательские пакеты контента являются расширенным элементом и должны использоваться только партнерами с опытом администрирования веб-контента. Недостоверные источники контента могут вводить небезопасный контент на ваш сайт. Следует добавлять только источники, которые вы доверяете.

> **IMPORTANT** Перед добавлением пользовательского пакета контента необходимо предварительно настроить пути обучения Microsoft 365 3.0 или более поздней. Для информирования об обеспечении путей обучения Microsoft 365 см. в пункте [Provision Microsoft 365 learning pathways.](./custom_provision.md)

### <a name="content-whitelisting"></a>Белый список контента
Как партнер вы несете ответственность за оказание помощи потребителям в том, чтобы ваш контент был в белом списке в их среде. Мы предлагаем создать тестовый сценарий в их среде, чтобы проверить, что содержимое может быть iFrame'd на странице SharePoint внутри брандмауэра. Следуйте [инструкциям по созданию страниц SharePoint для пользовательских](./custom_createnewpage.md) списков воспроизведения, чтобы подтвердить, что это так.

### <a name="add-a-content-pack-to-learning-pathways"></a>Добавление пакета контента в учебные пути
После создания изменения JSON и определения cdN можно добавить пакет контактов в учебные пути. 

1. На домашней странице сайта **"Пути** обучения" указать на "Домой", а затем нажмите кнопку **Администрирование путей обучения.**  
2. На странице **Администрирование** щелкните **... Добавьте пакет контента** в верхнем правом углу страницы.
3. Щелкните настраиваемый пакет контента, а затем введите имя пакета контента и укажите CDN, где находятся файлы JSON.

   ![Экран, на котором введите имя и пути.](media/cg-part-addconpack.png)

4. Нажмите кнопку **Сохранить**. Содержимое пользовательского пакета контента теперь должно отображаться на странице Администрирование. Пример: 

   ![Пример страницы администрирования.](media/cg-part-addconpackex.png)

### <a name="filter-to-the-content-pack-in-the-web-part"></a>Фильтрация пакета контента в веб-части
С помощью путей обучения можно добавить веб-часть путей обучения на страницу, фильтровать веб-часть, чтобы указать на исходный пакет пользовательского контента, а затем фильтровать веб-часть в категорию, подкатегорию, плейлист и нужный актив. 

1. На сайте путей обучения нажмите **кнопку New**, а затем **Страницу**.
2. Щелкните **Пробел,** а затем **создайте страницу**.
3. Дайте странице имя. 
4. Нажмите **кнопку + Добавьте новый раздел** на левой стороне страницы.
5. Щелкните в верхнем центре нового раздела, а затем добавьте **+** веб-часть путей обучения **Microsoft 365.**
6. Щелкните веб-часть, а затем нажмите значок **Изменить.**
7. В поле **Выбор источника обучения** выберите настраиваемый пакет контента, а затем фильтруйте веб-часть на нужное содержимое. Ниже приводится пример веб-части, отфильтрованной в плейлист из пользовательского пакета контента.

   ![Снимок экрана образца веб-части, отфильтрованной в плейлист из пользовательского пакета контента.](media/cg-part-conpackfilter.png)